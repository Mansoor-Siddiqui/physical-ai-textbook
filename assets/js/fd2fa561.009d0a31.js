"use strict";(globalThis.webpackChunkphysical_ai_textbook=globalThis.webpackChunkphysical_ai_textbook||[]).push([[252],{3415(e,n,r){r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"labs/lab02-urdf-design","title":"Lab 2: URDF Robot Design","description":"Design a mobile robot using URDF and visualize it in RViz","source":"@site/docs/labs/lab02-urdf-design.md","sourceDirName":"labs","slug":"/labs/lab02-urdf-design","permalink":"/physical-ai-textbook/docs/labs/lab02-urdf-design","draft":false,"unlisted":false,"editUrl":"https://github.com/Mansoor-Siddiqui/physical-ai-textbook/tree/master/physical-ai-textbook/docs/labs/lab02-urdf-design.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Lab 2: URDF Robot Design","description":"Design a mobile robot using URDF and visualize it in RViz","keywords":["urdf","robot design","rviz","visualization","lab"]},"sidebar":"labsSidebar","previous":{"title":"Lab 1: ROS2 Hello World","permalink":"/physical-ai-textbook/docs/labs/lab01-ros2-hello"},"next":{"title":"Lab 3: Gazebo Simulation","permalink":"/physical-ai-textbook/docs/labs/lab03-gazebo-sim"}}');var a=r(4848),t=r(8453);const l={sidebar_position:2,title:"Lab 2: URDF Robot Design",description:"Design a mobile robot using URDF and visualize it in RViz",keywords:["urdf","robot design","rviz","visualization","lab"]},s="Lab 2: URDF Robot Design",o={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Objectives",id:"objectives",level:2},{value:"Step 1: Create Robot Description Package",id:"step-1-create-robot-description-package",level:2},{value:"Step 2: Create Basic URDF",id:"step-2-create-basic-urdf",level:2},{value:"Step 3: Create Launch File",id:"step-3-create-launch-file",level:2},{value:"Step 4: Create RViz Config",id:"step-4-create-rviz-config",level:2},{value:"Step 5: Update setup.py",id:"step-5-update-setuppy",level:2},{value:"Step 6: Update package.xml",id:"step-6-update-packagexml",level:2},{value:"Step 7: Build and Visualize",id:"step-7-build-and-visualize",level:2},{value:"Step 8: Using Xacro (Optional)",id:"step-8-using-xacro-optional",level:2},{value:"Verification Checklist",id:"verification-checklist",level:2},{value:"Challenge",id:"challenge",level:2},{value:"Summary",id:"summary",level:2},{value:"Next Lab",id:"next-lab",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"lab-2-urdf-robot-design",children:"Lab 2: URDF Robot Design"})}),"\n",(0,a.jsx)(n.p,{children:"In this lab, you'll create a differential drive mobile robot using URDF and visualize it in RViz."}),"\n",(0,a.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Completed Lab 1"}),"\n",(0,a.jsx)(n.li,{children:"ROS2 Humble with visualization tools"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"objectives",children:"Objectives"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Understand URDF structure"}),"\n",(0,a.jsx)(n.li,{children:"Create links with visual and collision geometries"}),"\n",(0,a.jsx)(n.li,{children:"Define joints between links"}),"\n",(0,a.jsx)(n.li,{children:"Visualize robot in RViz"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"step-1-create-robot-description-package",children:"Step 1: Create Robot Description Package"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\r\n\r\n# Create package\r\nros2 pkg create --build-type ament_python \\\r\n    my_robot_description\r\n\r\ncd my_robot_description\r\nmkdir -p urdf launch rviz meshes\n"})}),"\n",(0,a.jsx)(n.h2,{id:"step-2-create-basic-urdf",children:"Step 2: Create Basic URDF"}),"\n",(0,a.jsxs)(n.p,{children:["Create ",(0,a.jsx)(n.code,{children:"urdf/my_robot.urdf"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot name="my_robot">\r\n  \r\n  \x3c!-- ==================== COLORS ==================== --\x3e\r\n  <material name="blue">\r\n    <color rgba="0.2 0.2 0.8 1.0"/>\r\n  </material>\r\n  <material name="black">\r\n    <color rgba="0.1 0.1 0.1 1.0"/>\r\n  </material>\r\n  <material name="white">\r\n    <color rgba="0.9 0.9 0.9 1.0"/>\r\n  </material>\r\n  <material name="red">\r\n    <color rgba="0.8 0.0 0.0 1.0"/>\r\n  </material>\r\n\r\n  \x3c!-- ==================== BASE LINK ==================== --\x3e\r\n  <link name="base_link">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.3 0.2 0.1"/>\r\n      </geometry>\r\n      <origin xyz="0 0 0.05" rpy="0 0 0"/>\r\n      <material name="blue"/>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <box size="0.3 0.2 0.1"/>\r\n      </geometry>\r\n      <origin xyz="0 0 0.05" rpy="0 0 0"/>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="5.0"/>\r\n      <origin xyz="0 0 0.05" rpy="0 0 0"/>\r\n      <inertia ixx="0.02" ixy="0" ixz="0" \r\n               iyy="0.04" iyz="0" izz="0.05"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- ==================== BASE FOOTPRINT ==================== --\x3e\r\n  <link name="base_footprint"/>\r\n  \r\n  <joint name="base_footprint_joint" type="fixed">\r\n    <parent link="base_footprint"/>\r\n    <child link="base_link"/>\r\n    <origin xyz="0 0 0.05" rpy="0 0 0"/>\r\n  </joint>\r\n\r\n  \x3c!-- ==================== LEFT WHEEL ==================== --\x3e\r\n  <link name="left_wheel">\r\n    <visual>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.04"/>\r\n      </geometry>\r\n      <material name="black"/>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.04"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="0.5"/>\r\n      <inertia ixx="0.0005" ixy="0" ixz="0" \r\n               iyy="0.0005" iyz="0" izz="0.001"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="left_wheel_joint" type="continuous">\r\n    <parent link="base_link"/>\r\n    <child link="left_wheel"/>\r\n    <origin xyz="0 0.12 0" rpy="-1.5708 0 0"/>\r\n    <axis xyz="0 0 1"/>\r\n  </joint>\r\n\r\n  \x3c!-- ==================== RIGHT WHEEL ==================== --\x3e\r\n  <link name="right_wheel">\r\n    <visual>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.04"/>\r\n      </geometry>\r\n      <material name="black"/>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.04"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="0.5"/>\r\n      <inertia ixx="0.0005" ixy="0" ixz="0" \r\n               iyy="0.0005" iyz="0" izz="0.001"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="right_wheel_joint" type="continuous">\r\n    <parent link="base_link"/>\r\n    <child link="right_wheel"/>\r\n    <origin xyz="0 -0.12 0" rpy="-1.5708 0 0"/>\r\n    <axis xyz="0 0 1"/>\r\n  </joint>\r\n\r\n  \x3c!-- ==================== CASTER WHEEL ==================== --\x3e\r\n  <link name="caster_wheel">\r\n    <visual>\r\n      <geometry>\r\n        <sphere radius="0.025"/>\r\n      </geometry>\r\n      <material name="white"/>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <sphere radius="0.025"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="0.1"/>\r\n      <inertia ixx="0.00001" ixy="0" ixz="0" \r\n               iyy="0.00001" iyz="0" izz="0.00001"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="caster_joint" type="fixed">\r\n    <parent link="base_link"/>\r\n    <child link="caster_wheel"/>\r\n    <origin xyz="-0.12 0 -0.025" rpy="0 0 0"/>\r\n  </joint>\r\n\r\n  \x3c!-- ==================== LIDAR ==================== --\x3e\r\n  <link name="lidar_link">\r\n    <visual>\r\n      <geometry>\r\n        <cylinder radius="0.03" length="0.04"/>\r\n      </geometry>\r\n      <material name="red"/>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <cylinder radius="0.03" length="0.04"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="0.2"/>\r\n      <inertia ixx="0.0001" ixy="0" ixz="0" \r\n               iyy="0.0001" iyz="0" izz="0.0001"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="lidar_joint" type="fixed">\r\n    <parent link="base_link"/>\r\n    <child link="lidar_link"/>\r\n    <origin xyz="0.1 0 0.12" rpy="0 0 0"/>\r\n  </joint>\r\n\r\n</robot>\n'})}),"\n",(0,a.jsx)(n.h2,{id:"step-3-create-launch-file",children:"Step 3: Create Launch File"}),"\n",(0,a.jsxs)(n.p,{children:["Create ",(0,a.jsx)(n.code,{children:"launch/display.launch.py"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\nfrom launch.substitutions import Command, PathJoinSubstitution\r\nfrom launch_ros.substitutions import FindPackageShare\r\nimport os\r\n\r\ndef generate_launch_description():\r\n    pkg_share = FindPackageShare('my_robot_description')\r\n    \r\n    urdf_file = PathJoinSubstitution([\r\n        pkg_share, 'urdf', 'my_robot.urdf'\r\n    ])\r\n    \r\n    rviz_config = PathJoinSubstitution([\r\n        pkg_share, 'rviz', 'display.rviz'\r\n    ])\r\n    \r\n    robot_description = Command(['cat ', urdf_file])\r\n    \r\n    return LaunchDescription([\r\n        # Robot State Publisher\r\n        Node(\r\n            package='robot_state_publisher',\r\n            executable='robot_state_publisher',\r\n            name='robot_state_publisher',\r\n            parameters=[{\r\n                'robot_description': robot_description\r\n            }]\r\n        ),\r\n        \r\n        # Joint State Publisher GUI\r\n        Node(\r\n            package='joint_state_publisher_gui',\r\n            executable='joint_state_publisher_gui',\r\n            name='joint_state_publisher_gui'\r\n        ),\r\n        \r\n        # RViz\r\n        Node(\r\n            package='rviz2',\r\n            executable='rviz2',\r\n            name='rviz2',\r\n            arguments=['-d', rviz_config],\r\n            output='screen'\r\n        ),\r\n    ])\n"})}),"\n",(0,a.jsx)(n.h2,{id:"step-4-create-rviz-config",children:"Step 4: Create RViz Config"}),"\n",(0,a.jsxs)(n.p,{children:["Create ",(0,a.jsx)(n.code,{children:"rviz/display.rviz"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"Panels:\r\n  - Class: rviz_common/Displays\r\n    Name: Displays\r\nVisualization Manager:\r\n  Displays:\r\n    - Class: rviz_default_plugins/Grid\r\n      Name: Grid\r\n      Value: true\r\n    - Class: rviz_default_plugins/RobotModel\r\n      Name: RobotModel\r\n      Value: true\r\n      Description Topic:\r\n        Value: /robot_description\r\n    - Class: rviz_default_plugins/TF\r\n      Name: TF\r\n      Value: true\r\n  Global Options:\r\n    Fixed Frame: base_link\r\n    Frame Rate: 30\n"})}),"\n",(0,a.jsx)(n.h2,{id:"step-5-update-setuppy",children:"Step 5: Update setup.py"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"from setuptools import setup\r\nfrom glob import glob\r\nimport os\r\n\r\npackage_name = 'my_robot_description'\r\n\r\nsetup(\r\n    name=package_name,\r\n    version='0.1.0',\r\n    packages=[package_name],\r\n    data_files=[\r\n        ('share/ament_index/resource_index/packages',\r\n            ['resource/' + package_name]),\r\n        ('share/' + package_name, ['package.xml']),\r\n        (os.path.join('share', package_name, 'urdf'), \r\n            glob('urdf/*.urdf')),\r\n        (os.path.join('share', package_name, 'launch'), \r\n            glob('launch/*.py')),\r\n        (os.path.join('share', package_name, 'rviz'), \r\n            glob('rviz/*.rviz')),\r\n    ],\r\n    install_requires=['setuptools'],\r\n    zip_safe=True,\r\n    maintainer='your_name',\r\n    maintainer_email='your@email.com',\r\n    description='Robot description package',\r\n    license='Apache-2.0',\r\n    tests_require=['pytest'],\r\n    entry_points={\r\n        'console_scripts': [],\r\n    },\r\n)\n"})}),"\n",(0,a.jsx)(n.h2,{id:"step-6-update-packagexml",children:"Step 6: Update package.xml"}),"\n",(0,a.jsx)(n.p,{children:"Add dependencies:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:"<depend>robot_state_publisher</depend>\r\n<depend>joint_state_publisher_gui</depend>\r\n<depend>rviz2</depend>\n"})}),"\n",(0,a.jsx)(n.h2,{id:"step-7-build-and-visualize",children:"Step 7: Build and Visualize"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\r\ncolcon build --packages-select my_robot_description\r\nsource install/setup.bash\r\n\r\nros2 launch my_robot_description display.launch.py\n"})}),"\n",(0,a.jsx)(n.h2,{id:"step-8-using-xacro-optional",children:"Step 8: Using Xacro (Optional)"}),"\n",(0,a.jsxs)(n.p,{children:["Convert to Xacro for modularity. Create ",(0,a.jsx)(n.code,{children:"urdf/my_robot.urdf.xacro"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="my_robot">\r\n  \r\n  \x3c!-- Properties --\x3e\r\n  <xacro:property name="wheel_radius" value="0.05"/>\r\n  <xacro:property name="wheel_width" value="0.04"/>\r\n  <xacro:property name="base_width" value="0.2"/>\r\n  <xacro:property name="base_length" value="0.3"/>\r\n  \r\n  \x3c!-- Wheel Macro --\x3e\r\n  <xacro:macro name="wheel" params="name x_offset y_offset">\r\n    <link name="${name}">\r\n      <visual>\r\n        <geometry>\r\n          <cylinder radius="${wheel_radius}" length="${wheel_width}"/>\r\n        </geometry>\r\n        <material name="black"/>\r\n      </visual>\r\n      <collision>\r\n        <geometry>\r\n          <cylinder radius="${wheel_radius}" length="${wheel_width}"/>\r\n        </geometry>\r\n      </collision>\r\n    </link>\r\n    \r\n    <joint name="${name}_joint" type="continuous">\r\n      <parent link="base_link"/>\r\n      <child link="${name}"/>\r\n      <origin xyz="${x_offset} ${y_offset} 0" rpy="-1.5708 0 0"/>\r\n      <axis xyz="0 0 1"/>\r\n    </joint>\r\n  </xacro:macro>\r\n  \r\n  \x3c!-- Use macros --\x3e\r\n  <xacro:wheel name="left_wheel" x_offset="0" y_offset="0.12"/>\r\n  <xacro:wheel name="right_wheel" x_offset="0" y_offset="-0.12"/>\r\n  \r\n</robot>\n'})}),"\n",(0,a.jsx)(n.h2,{id:"verification-checklist",children:"Verification Checklist"}),"\n",(0,a.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Robot displays correctly in RViz"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Wheels rotate using joint state publisher GUI"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","TF tree shows all frames"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","No red errors in RViz"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"challenge",children:"Challenge"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Add a camera link on top of the robot"}),"\n",(0,a.jsx)(n.li,{children:"Create a robot arm with 3 revolute joints"}),"\n",(0,a.jsx)(n.li,{children:"Use mesh files for realistic appearance"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,a.jsx)(n.p,{children:"You learned how to:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Create URDF robot descriptions"}),"\n",(0,a.jsx)(n.li,{children:"Define links with visual, collision, and inertial properties"}),"\n",(0,a.jsx)(n.li,{children:"Connect links with joints"}),"\n",(0,a.jsx)(n.li,{children:"Visualize robots in RViz"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"next-lab",children:"Next Lab"}),"\n",(0,a.jsxs)(n.p,{children:["Continue to ",(0,a.jsx)(n.a,{href:"/docs/labs/lab03-gazebo-sim",children:"Lab 3: Gazebo Simulation"})," to simulate your robot."]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453(e,n,r){r.d(n,{R:()=>l,x:()=>s});var i=r(6540);const a={},t=i.createContext(a);function l(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);